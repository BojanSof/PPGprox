#include <array>
#include <string_view>

#include <zephyr/logging/log.h>
#include <zephyr/kernel.h>

LOG_MODULE_REGISTER(ppg, LOG_LEVEL_INF);

#include "Serial.hpp"
#include "Benchmark.hpp"
#include "CycleCounter.hpp"
#include "IIRFilter.hpp"
#include "Fft.hpp"

template<typename ArrayT>
static void logArray(const ArrayT& arr, const char* const msg = "")
{
    if(arr.size() * sizeof(arr[0]) >= 4096)
    {
        const auto halfSize = arr.size() / 2;
        const auto halfSizeBytes  = arr.size() / 2;
        LOG_HEXDUMP_INF(arr.data(), halfSizeBytes, msg);
        LOG_HEXDUMP_INF(arr.data() + halfSize, halfSizeBytes, msg);
    }
    else
    {
        LOG_HEXDUMP_INF(arr.data(), arr.size() * sizeof(arr[0]), msg);
    }
}

int main()
{
    using Serial = Hardware::Serial;
    Serial serial{DEVICE_DT_GET_ONE(zephyr_cdc_acm_uart)};

    if(!serial.enable())
    {
        LOG_ERR("Can't enable USB.");
        return -1;
    }

    CycleCounter cycCounter;
    LOG_INF("---------------------------------------------");
    LOG_INF("       Benchmarking CMSIS-DSP code           ");
    LOG_INF("---------------------------------------------");
    LOG_INF(" 1. RFFT on data with length of 1024 samples ");
    LOG_INF("---------------------------------------------");
    static constexpr uint16_t fftLength = 1024;
    using Fft = Dsp::Fft<fftLength>;
    Fft fft;
    static constexpr std::array<float32_t, fftLength> inputData{{
        0.0f, 2.938926261462366f, 4.755282581475767f, 4.755282581475768f, 2.9389262614623664f, 6.123233995736766e-16f, -2.9389262614623632f, -4.755282581475767f, -4.755282581475768f,
        -2.938926261462367f, -1.2246467991473533e-15f, 2.9389262614623615f, 4.755282581475766f, 4.755282581475768f, 2.938926261462367f, 1.8369701987210296e-15f, -2.938926261462364f,
        -4.755282581475767f, -4.755282581475769f, -2.9389262614623672f, -2.4492935982947065e-15f, 2.9389262614623632f, 4.755282581475765f, 4.755282581475772f, 2.9389262614623752f,
        -5.82016719913287e-15f, -2.938926261462363f, -4.755282581475767f, -4.755282581475769f, -2.938926261462354f, -3.673940397442059e-15f, 2.9389262614623624f, 4.755282581475766f,
        4.755282581475764f, 2.938926261462369f, 2.204983219101824e-14f, -2.9389262614623624f, -4.755282581475766f, -4.755282581475769f, -2.9389262614623695f, -4.898587196589413e-15f,
        2.938926261462362f, 4.755282581475766f, 4.755282581475769f, 2.9389262614623846f, 5.5109105961630896e-15f, -2.938926261462347f, -4.755282581475772f, -4.755282581475775f,
        -2.938926261462371f, 1.164033439826574e-14f, 2.9389262614623752f, 4.755282581475766f, 4.755282581475765f, 2.9389262614623712f, -1.1028010998692062e-14f, -2.93892626146236f,
        -4.75528258147576f, -4.755282581475759f, -2.9389262614623854f, -7.347880794884118e-15f, 2.938926261462374f, 4.7552825814757655f, 4.755282581475765f, 2.9389262614623717f,
        2.5723772588460302e-14f, -2.938926261462388f, -4.75528258147576f, -4.75528258147577f, -2.938926261462358f, -4.409966438203648e-14f, 2.938926261462344f, 4.755282581475765f,
        4.755282581475776f, 2.938926261462373f, 2.6948419387607653e-14f, -2.938926261462358f, -4.75528258147577f, -4.755282581475771f, -2.938926261462388f, -9.797174393178826e-15f,
        2.9389262614623437f, 4.755282581475765f, 4.755282581475754f, 2.938926261462374f, 2.8173066186755008e-14f, -2.938926261462357f, -4.75528258147577f, -4.755282581475782f,
        -2.93892626146236f, -1.1021821192326179e-14f, 2.9389262614623712f, 4.755282581475753f, 4.755282581475777f, 2.9389262614623464f, -6.12942380210265e-15f, -2.9389262614623273f,
        -4.755282581475758f, -4.755282581475772f, -2.9389262614623615f, 2.328066879653148e-14f, 2.938926261462341f, 4.755282581475775f, 4.755282581475777f, 2.9389262614623757f,
        -4.904777002955297e-15f, -2.938926261462384f, -4.755282581475758f, -4.755282581475772f, -2.9389262614623624f, 2.2056021997384124e-14f, 2.938926261462398f, 4.755282581475764f,
        4.755282581475766f, 2.938926261462406f, -3.920726699181296e-14f, -2.9389262614624116f, -4.755282581475769f, -4.755282581475783f, -2.9389262614623917f, -1.4695761589768237e-14f,
        2.9389262614623677f, 4.755282581475774f, 4.755282581475778f, 2.938926261462378f, 6.859879017134943e-14f, -2.938926261462382f, -4.755282581475779f, -4.755282581475773f,
        -2.938926261462422f, -5.1447545176920604e-14f, 2.9389262614623384f, 4.755282581475785f, 4.755282581475767f, 2.9389262614624077f, 3.4296300182491775e-14f, -2.9389262614623526f,
        -4.755282581475746f, -4.755282581475762f, -2.938926261462394f, -8.819932876407296e-14f, 2.9389262614623664f, 4.755282581475751f, 4.755282581475757f, 2.93892626146238f,
        7.104808376964414e-14f, -2.9389262614623224f, -4.755282581475757f, -4.7552825814757735f, -2.9389262614623664f, -5.3896838775215307e-14f, 2.938926261462336f, 4.755282581475762f,
        4.755282581475768f, 2.9389262614623526f, 3.674559378078648e-14f, -2.93892626146235f, -4.755282581475745f, -4.755282581475785f, -2.9389262614623957f, -1.9594348786357652e-14f,
        2.938926261462364f, 4.755282581475751f, 4.755282581475779f, 2.938926261462382f, 7.349737736793884e-14f, -2.9389262614624356f, -4.755282581475778f, -4.755282581475774f,
        -2.9389262614623677f, -5.6346132373510016e-14f, 2.9389262614623917f, 4.755282581475761f, 4.755282581475791f, 2.938926261462354f, 3.919488737908119e-14f, -2.938926261462291f,
        -4.755282581475789f, -4.755282581475764f, -2.93892626146234f, -2.2043642384652358e-14f, 2.9389262614623046f, 4.755282581475772f, 4.755282581475781f, 2.9389262614624414f,
        4.892397390223529e-15f, -2.9389262614623184f, -4.755282581475777f, -4.755282581475753f, -2.9389262614623126f, 1.22588476042053e-14f, 2.938926261462332f, 4.755282581475739f,
        4.75528258147577f, 2.9389262614624134f, 1.126984545533859e-13f, -2.9389262614623464f, -4.755282581475743f, -4.755282581475765f, -2.9389262614623424f, 4.656133759306296e-14f,
        2.93892626146236f, 4.75528258147575f, 4.755282581475781f, 2.9389262614623286f, 7.839596456452824e-14f, -2.938926261462316f, -4.755282581475754f, -4.755282581475776f,
        -2.9389262614623717f, 9.809554005910593e-15f, 2.938926261462388f, 4.7552825814757815f, 4.755282581475793f, 2.9389262614624156f, 4.40934745756706e-14f, -2.938926261462344f,
        -4.755282581475721f, -4.755282581475765f, -2.938926261462344f, 4.411204399476825e-14f, 2.9389262614624156f, 4.755282581475793f, 4.7552825814757815f, 2.938926261462388f,
        1.5189953173883297e-13f, -2.9389262614623717f, -4.755282581475732f, -4.755282581475798f, -2.938926261462431f, 7.841453398362592e-14f, 2.9389262614623286f, 4.755282581475803f,
        4.755282581475771f, 2.93892626146236f, 1.1759704174997533e-13f, -2.9389262614622846f, -4.7552825814757425f, -4.755282581475788f, -2.938926261462403f, -2.9391523179536473e-14f,
        2.938926261462356f, 4.75528258147577f, 4.75528258147576f, 2.938926261462332f, 8.329455176111768e-14f, -2.9389262614623126f, -4.755282581475753f, -4.755282581475777f,
        -2.9389262614623757f, -1.3719758034269887e-13f, 2.938926261462384f, 4.755282581475781f, 4.755282581475794f, 2.9389262614623046f, 4.8992061772260005e-14f, -2.93892626146234f,
        -4.755282581475764f, -4.755282581475811f, -2.938926261462348f, -1.0289509035384121e-13f, 2.9389262614622966f, 4.755282581475747f, 4.755282581475783f, 2.938926261462277f,
        1.4689571783402354e-14f, -2.9389262614623677f, -4.755282581475774f, -4.7552825814758f, -2.9389262614624356f, -6.859260036498355e-14f, 2.9389262614623246f, 4.7552825814757576f,
        4.755282581475773f, 2.9389262614624787f, -1.96129182054553e-14f, -2.9389262614623957f, -4.755282581475785f, -4.7552825814757895f, -2.9389262614624077f, -1.7639865752814593e-13f,
        2.938926261462237f, 4.755282581475768f, 4.755282581475762f, 2.938926261462451f, 8.819313895770708e-14f, -2.9389262614624236f, -4.755282581475796f, -4.755282581475779f,
        -2.93892626146238f, -1.4209616753928827e-13f, 2.9389262614622647f, 4.7552825814757345f, 4.755282581475751f, 2.9389262614624236f, 5.3890648968849424e-14f, -2.938926261462336f,
        -4.755282581475762f, -4.755282581475768f, -2.9389262614623526f, -1.0779367755043061e-13f, 2.938926261462292f, 4.755282581475745f, 4.755282581475829f, 2.9389262614623957f,
        1.9588158979991766e-14f, -2.938926261462364f, -4.755282581475729f, -4.7552825814757576f, -2.9389262614623246f, -7.349118756157296e-14f, 2.93892626146232f, 4.755282581475756f,
        4.755282581475818f, 2.9389262614624827f, -1.471433100886589e-14f, -2.938926261462277f, -4.75528258147574f, -4.755282581475791f, -2.9389262614622966f, -3.9188697572715304e-14f,
        2.938926261462348f, 4.755282581475766f, 4.755282581475807f, 2.938926261462455f, 9.309172615429649e-14f, -2.9389262614623046f, -4.75528258147575f, -4.755282581475781f,
        -2.938926261462499f, -1.4699475473587768e-13f, 2.9389262614623757f, 4.755282581475821f, 4.755282581475797f, 2.9389262614623126f, 2.008977833174589e-13f, -2.938926261462332f,
        -4.75528258147576f, -4.75528258147577f, -2.938926261462471f, -1.1269226474702003e-13f, 2.9389262614622886f, 4.755282581475788f, 4.7552825814757425f, 2.9389262614623997f,
        -1.1762180097543884e-13f, -2.938926261462245f, -4.755282581475771f, -4.755282581475759f, -2.938926261462443f, -7.838977475816237e-14f, 2.938926261462316f, 4.7552825814757105f,
        4.755282581475776f, 2.9389262614622567f, 1.3229280333974358e-13f, -2.938926261462388f, -4.755282581475738f, -4.755282581475749f, -2.9389262614624156f, -4.4087284769304716e-14f,
        2.938926261462344f, 4.755282581475721f, 4.755282581475765f, 2.938926261462344f, -1.8622678095315416e-13f, -2.9389262614623006f, -4.755282581475793f, -4.755282581475826f,
        -2.938926261462388f, -9.784794780447059e-15f, 2.9389262614622567f, 4.755282581475732f, 4.755282581475798f, 2.938926261462316f, 6.368782336202825e-14f, -2.938926261462443f,
        -4.755282581475759f, -4.755282581475727f, -2.938926261462475f, 2.45176952084106e-14f, 2.9389262614622846f, 4.7552825814757425f, 4.755282581475788f, 2.9389262614625187f,
        2.9385333373170597e-14f, -2.938926261462356f, -4.7552825814758135f, -4.755282581475805f, -2.938926261462332f, -2.253969091067718e-13f, 2.9389262614623126f, 4.755282581475753f,
        4.755282581475777f, 2.938926261462491f, 1.3719139053633298e-13f, -2.938926261462384f, -4.755282581475781f, -4.75528258147575f, -2.9389262614624196f, 9.312267518612591e-14f,
        2.938926261462225f, 4.755282581475764f, 4.755282581475766f, 2.9389262614624636f, 1.0288890054747531e-13f, -2.9389262614622966f, -4.755282581475747f, -4.75528258147574f,
        -2.938926261462162f, -1.567919291290565e-13f, 2.9389262614623677f, 4.755282581475731f, 4.755282581475756f, 2.9389262614624356f, 2.106949577106377e-13f, -2.9389262614623246f,
        -4.755282581475714f, -4.755282581475773f, -2.9389262614624787f, 1.9619108011821187e-14f, 2.9389262614622806f, 4.755282581475785f, 4.7552825814757895f, 2.938926261462292f,
        3.428392056976e-14f, -2.938926261462237f, -4.755282581475768f, -4.7552825814758055f, -2.938926261462336f, -8.81869491513412e-14f, 2.9389262614624236f, 4.755282581475751f,
        4.7552825814757345f, 2.93892626146261f, 1.420899777329224e-13f, -2.93892626146238f, -4.7552825814757345f, -4.755282581475751f, -2.9389262614624236f, 8.82240879895365e-14f,
        2.938926261462336f, 4.7552825814758055f, 4.755282581475768f, 2.938926261462237f, 2.4989603489608477e-13f, -2.938926261462292f, -4.7552825814757895f, -4.755282581475785f,
        -2.9389262614622806f, -3.0379906347766593e-13f, 2.938926261462249f, 4.755282581475773f, 4.755282581475714f, 2.938926261462554f, 7.348499775520707e-14f, -2.938926261462205f,
        -4.755282581475756f, -4.755282581475818f, -2.9389262614623677f, 1.5682906796725184e-13f, 2.938926261462162f, 4.75528258147574f, 4.755282581475747f, 2.938926261462182f,
        1.8129105491836945e-13f, -2.938926261462348f, -4.755282581475723f, -4.755282581475764f, -2.938926261462455f, -2.3519408349995067e-13f, 2.9389262614623046f, 4.755282581475706f,
        4.755282581475781f, 2.938926261462499f, 4.880017777491762e-15f, -2.9389262614622607f, -4.755282581475777f, -4.755282581475797f, -2.9389262614623126f, -5.878304635907295e-14f,
        2.9389262614622176f, 4.75528258147576f, 4.7552825814758135f, 2.938926261462356f, 1.1268607494065414e-13f, -2.938926261462403f, -4.755282581475743f, -4.7552825814757425f,
        -2.9389262614626297f, -1.6658910352223535e-13f, 2.93892626146236f, 4.755282581475727f, 4.755282581475759f, 2.938926261462443f, -6.372496220022355e-14f, -2.938926261462316f,
        -4.755282581475798f, -4.755282581475776f, -2.9389262614622567f, -2.7439516068539773e-13f, 2.938926261462273f, 4.7552825814757815f, 4.755282581475793f, 2.9389262614623006f,
        3.282981892669789e-13f, -2.938926261462229f, -4.755282581475765f, -4.755282581475721f, -2.9389262614625746f, -9.798412354452001e-14f, 2.9389262614621856f, 4.755282581475749f,
        4.755282581475738f, 2.938926261462388f, -1.3232994217793885e-13f, -2.938926261462142f, -4.755282581475732f, -4.755282581475754f, -2.9389262614622016f, -2.0579018070768242e-13f,
        2.9389262614623286f, 4.755282581475715f, 4.755282581475771f, 2.938926261462475f, 2.596932092892636e-13f, -2.9389262614622846f, -4.755282581475698f, -4.7552825814757f,
        -2.9389262614625187f, -2.937914356680471e-14f, 2.9389262614620115f, 4.75528258147577f, 4.755282581475805f, 2.938926261462332f, 8.328217214838591e-14f, -2.9389262614621976f,
        -4.755282581475841f, -4.755282581475821f, -2.9389262614623757f, -1.371852007299671e-13f, 2.938926261462384f, 4.755282581475736f, 4.75528258147575f, 2.9389262614624196f,
        1.910882293115483e-13f, -2.93892626146234f, -4.75528258147572f, -4.755282581475854f, -2.9389262614624636f, 3.92258364109106e-14f, 2.9389262614620666f, 4.755282581475791f,
        4.755282581475871f, 2.938926261462277f, 1.4677192170670588e-14f, -2.938926261462253f, -4.755282581475774f, -4.7552825814758f, -2.93892626146232f, -3.5279731505629186e-13f,
        2.9389262614624396f, 4.75528258147567f, 4.755282581475729f, 2.938926261462364f, 1.2248324933383297e-13f, -2.9389262614623957f, -4.755282581475741f, -4.755282581475833f,
        -2.9389262614624077f, -1.7638627791541416e-13f, 2.938926261462122f, 4.755282581475812f, 4.75528258147585f, 2.938926261462221f, 2.3028930649699533e-13f, -2.9389262614623086f,
        -4.755282581475708f, -4.755282581475779f, -2.938926261462495f, -2.8419233507857654e-13f, 2.938926261462495f, 4.755282581475691f, 4.755282581475708f, 2.938926261462538f,
        5.387826935611766e-14f, -2.938926261462451f, -4.755282581475762f, -4.755282581475812f, -2.9389262614623526f, -1.0778129793769885e-13f, 2.9389262614621776f, 4.755282581475745f,
        4.755282581475829f, 2.9389262614623957f, 1.6168432651928004e-13f, -2.938926261462364f, -4.755282581475641f, -4.7552825814757576f, -2.9389262614624396f, -2.1558735510086123e-13f,
        2.93892626146232f, 4.755282581475712f, 4.7552825814756865f, 2.9389262614624827f, -1.4726710621597658e-14f, -2.938926261462047f, -4.755282581475783f, -4.755282581475791f,
        -2.9389262614622966f, -3.917631795998353e-14f, 2.938926261462233f, 4.755282581475766f, 4.755282581475807f, 2.93892626146257f, 3.772964408456048e-13f, -2.9389262614624196f,
        -4.7552825814756625f, -4.755282581475736f, -2.938926261462384f, -1.469823751231459e-13f, 2.9389262614623757f, 4.755282581475734f, 4.755282581475841f, 2.938926261462427f,
        -8.333169059931296e-14f, -2.9389262614621026f, -4.755282581475805f, -4.755282581475858f, -2.9389262614622416f, 2.942866201773178e-14f, 2.9389262614622886f, 4.7552825814757f,
        4.755282581475787f, 2.9389262614625142f, 3.086914608678895e-13f, -2.938926261462245f, -4.755282581475683f, -4.755282581475715f, -2.938926261462558f, -7.837739514543061e-14f,
        2.938926261462431f, 4.755282581475754f, 4.75528258147582f, 2.9389262614623717f, 1.3228042372701179e-13f, -2.938926261462158f, -4.755282581475826f, -4.755282581475837f,
        -2.9389262614624156f, -1.8618345230859298e-13f, 2.938926261462344f, 4.755282581475721f, 4.755282581475765f, 2.938926261462459f, 2.400864808901742e-13f, -2.9389262614623006f,
        -4.755282581475793f, -4.7552825814758695f, -2.9389262614625027f, -2.9398950947175535e-13f, 2.9389262614624867f, 4.755282581475776f, 4.755282581475886f, 2.9389262614620866f,
        6.367544374929648e-14f, -2.9389262614622136f, -4.755282581475759f, -4.755282581475727f, -2.93892626146236f, -4.017955666349178e-13f, 2.9389262614621696f, 4.7552825814757425f,
        4.755282581475743f, 2.938926261462403f, 1.7148150091245887e-13f, -2.938926261462356f, -4.755282581475726f, -4.755282581475848f, -2.9389262614622176f, -2.2538452949404006e-13f,
        2.9389262614620826f, 4.75528258147571f, 4.755282581475777f, 2.9389262614622607f, 2.7928755807562125e-13f, -2.938926261462499f, -4.755282581475693f, -4.755282581475794f,
        -2.9389262614625347f, 2.352436019508777e-13f, 2.938926261462455f, 4.755282581475676f, 4.755282581475898f, 2.938926261462348f, 1.0287652093474355e-13f, -2.9389262614624116f,
        -4.755282581475747f, -4.755282581475827f, -2.9389262614623917f, -1.5677954951632475e-13f, 2.9389262614625977f, 4.755282581475731f, 4.755282581475844f, 2.9389262614626652f,
        -7.353451620613414e-14f, -2.9389262614623246f, -4.755282581475626f, -4.755282581475685f, -2.9389262614624787f, -2.6458560667948715e-13f, 2.9389262614622806f, 4.755282581475785f,
        4.755282581475702f, 2.9389262614625227f, 3.427154095702824e-14f, -2.938926261462467f, -4.755282581475768f, -4.7552825814758055f, -2.938926261462336f, -8.817456953860943e-14f,
        2.9389262614621936f, 4.755282581475751f, 4.7552825814757345f, 2.93892626146261f, 4.262946924242307e-13f, -2.93892626146238f, -4.7552825814757345f, -4.755282581475751f,
        -2.9389262614626532f, 3.724535619063083e-13f, 2.938926261462336f, 4.7552825814757185f, 4.755282581475856f, 2.938926261462237f, -3.433343902068707e-14f, -2.9389262614620626f,
        -4.7552825814757895f, -4.755282581475785f, -2.9389262614622806f, -1.9569589560894117e-14f, 2.938926261462249f, 4.755282581475685f, 4.755282581475802f, 2.938926261462554f,
        -2.1074447616156477e-13f, -2.938926261462205f, -4.755282581475669f, -4.755282581475731f, -2.9389262614623677f, -1.273756467240565e-13f, 2.938926261461932f, 4.755282581475827f,
        4.755282581475835f, 2.9389262614624116f, 1.8127867530563769e-13f, -2.938926261462578f, -4.755282581475811f, -4.755282581475852f, -2.938926261462455f, 4.90353904168212e-14f,
        2.9389262614623046f, 4.755282581475706f, 4.755282581475781f, 2.938926261462499f, 2.8908473246880007e-13f, -2.9389262614622607f, -4.755282581475777f, -4.755282581475885f,
        -2.938926261462542f, -5.877066674634119e-14f, 2.938926261462447f, 4.75528258147576f, 4.755282581475901f, 2.938926261462126f, 1.1267369532792237e-13f, -2.9389262614621736f,
        -4.755282581475743f, -4.7552825814757425f, -2.9389262614623997f, -4.507938182135436e-13f, 2.93892626146236f, 4.755282581475727f, 4.755282581475759f, 2.938926261462443f,
        2.2047975249108475e-13f, -2.938926261462316f, -4.7552825814757105f, -4.755282581475864f, -2.9389262614622567f, -2.7438278107266596e-13f, 2.938926261462043f, 4.7552825814757815f,
        4.755282581475793f, 2.9389262614623006f, 3.2828580965424713e-13f, -2.938926261462459f, -4.755282581475678f, -4.755282581475809f, -2.9389262614625746f, 1.8624535037225183e-13f,
        2.9389262614624156f, 4.755282581475661f, 4.755282581475738f, 2.938926261462388f, 1.5187477251336943e-13f, -2.9389262614623717f, -4.755282581475732f, -4.755282581475843f,
        -2.938926261462431f, -2.0577780109495062e-13f, 2.938926261462558f, 4.755282581475715f, 4.755282581475859f, 2.938926261462475f, 2.596808296765318e-13f, -2.9389262614625142f,
        -4.75528258147561f, -4.755282581475612f, -2.9389262614625187f, -3.13583858258113e-13f, 2.9389262614620115f, 4.75528258147577f, 4.755282581475805f, 2.938926261462562f,
        -2.0094730176838596e-13f, -2.938926261462427f, -4.755282581475753f, -4.755282581475821f, -2.938926261462606f, -4.213899154212754e-13f, 2.938926261462384f, 4.755282581475736f,
        4.7552825814756625f, 2.9389262614626492f, 4.752929440028565e-13f, -2.93892626146234f, -4.75528258147572f, -4.755282581475854f, -2.938926261462693f, 3.9238216023642374e-14f,
        2.9389262614622966f, 4.755282581475703f, 4.755282581475695f, 2.938926261462277f, 1.4664812557938822e-14f, -2.938926261462253f, -4.7552825814756865f, -4.755282581475712f,
        -2.93892626146232f, -6.856784113952e-14f, 2.9389262614622096f, 4.75528258147567f, 4.755282581475904f, 2.938926261462364f, 1.224708697211012e-13f, -2.938926261462166f,
        -4.755282581475654f, -4.755282581475745f, -2.9389262614624077f, -1.763738983026824e-13f, 2.9389262614621225f, 4.755282581475812f, 4.755282581475762f, 2.938926261462451f,
        -3.381572617238166e-13f, -2.938926261462538f, -4.755282581475796f, -4.755282581475954f, -2.938926261462495f, -2.841799554658448e-13f, 2.938926261462495f, 4.755282581475779f,
        4.755282581475796f, 2.938926261462538f, 3.3808298404742594e-13f, -2.938926261462451f, -4.755282581475762f, -4.755282581475812f, -2.938926261462582f, 1.76448175979073e-13f,
        2.9389262614624077f, 4.755282581475745f, 4.7552825814760045f, 2.938926261462166f, 4.458890412105883e-13f, -2.938926261462364f, -4.755282581475729f, -4.75528258147567f,
        -2.938926261462209f, -4.997920697921695e-13f, 2.93892626146232f, 4.755282581475712f, 4.755282581475862f, 2.938926261462253f, -1.4739090234329423e-14f, -2.938926261462277f,
        -4.755282581475695f, -4.755282581475703f, -2.9389262614622966f, -6.075981269553319e-13f, 2.938926261462233f, 4.7552825814756785f, 4.75528258147572f, 2.93892626146234f,
        6.615011555369131e-13f, -2.9389262614626492f, -4.7552825814756625f, -4.755282581475912f, -2.938926261462384f, -1.4696999551041415e-13f, 2.938926261462606f, 4.755282581475646f,
        4.755282581475753f, 2.938926261462427f, 2.0087302409199534e-13f, -2.9389262614621026f, -4.755282581475629f, -4.75528258147577f, -2.938926261462471f, 3.1365813593450367e-13f,
        2.9389262614625187f, 4.755282581475612f, 4.755282581475962f, 2.9389262614625142f, 3.086790812551577e-13f, -2.938926261462475f, -4.755282581475596f, -4.755282581475627f,
        -2.938926261462558f, -3.625821098367389e-13f, 2.938926261462431f, 4.755282581475754f, 4.75528258147582f, 2.938926261462602f, -1.5194905018976005e-13f, -2.938926261462388f,
        -4.755282581475738f, -4.755282581475837f, -2.9389262614626457f, -4.703881669999013e-13f, 2.938926261462344f, 4.755282581475721f, 4.755282581475678f, 2.938926261462689f,
        5.242911955814825e-13f, -2.9389262614623006f, -4.755282581475704f, -4.7552825814758695f, -2.9389262614627327f, -9.760035554983524e-15f, 2.9389262614622567f, 4.755282581475687f,
        4.7552825814757105f, 2.938926261462316f, 6.366306413656472e-14f, -2.9389262614622136f, -4.755282581475671f, -4.755282581475727f, -2.93892626146236f, -1.175660927181459e-13f,
        2.9389262614621696f, 4.7552825814756545f, 4.75528258147592f, 2.938926261462403f, 1.7146912129972708e-13f, -2.9389262614621265f, -4.755282581475638f, -4.75528258147576f,
        -2.938926261462447f, -2.2537214988130827e-13f, 2.938926261462542f, 4.755282581475797f, 4.755282581475777f, 2.938926261462491f, -2.8915901014519066e-13f, -2.938926261462499f,
        -4.755282581475781f, -4.75528258147597f, -2.9389262614625347f, -3.331782070444707e-13f, 2.938926261462455f, 4.755282581475764f, 4.755282581475811f, 2.938926261462578f,
        3.8708123562605187e-13f, -2.9389262614624116f, -4.755282581475747f, -4.755282581475827f, -2.9389262614626217f, 1.274499244004471e-13f, 2.9389262614623677f, 4.755282581475731f,
        4.755282581475669f, 2.938926261462205f, 4.948872927892142e-13f, -2.9389262614623246f, -4.755282581475714f, -4.755282581475685f, -2.938926261462249f, -5.487903213707955e-13f,
        2.9389262614622806f, 4.755282581475697f, 4.755282581475877f, 2.938926261462292f, 3.425916134429647e-14f, -2.9389262614622376f, -4.75528258147568f, -4.7552825814757185f,
        -2.938926261462336f, -6.565963785339578e-13f, 2.9389262614621936f, 4.755282581475663f, 4.7552825814757345f, 2.93892626146238f, -4.263689701006213e-13f, -2.93892626146261f,
        -4.755282581475647f, -4.755282581475927f, -2.9389262614624236f, -1.9596824708904002e-13f, 2.938926261462566f, 4.7552825814756305f, 4.755282581475768f
    }};
    LOG_INF("Performing benchmark 1");
    auto [duration, fftResult] = Benchmark::benchmark(cycCounter, [&fft](const Fft::InputT& input) {
        return fft.transform(input);
    }, inputData);
    auto ticks = std::chrono::duration_cast<std::chrono::microseconds>(duration).count();
    auto time = 1000000U * ticks / CycleCounter::period::den;
    LOG_INF("Benchmark 1 done");
    LOG_INF("Execution time");
    LOG_INF("Ticks = %lld", ticks);
    LOG_INF("Time = %lld us", time);
    logArray(inputData, "Input data (float32)");
    logArray(fftResult, "FFT result (float32)");
        
    while(true) { k_msleep(100); }

    return 0;
}
